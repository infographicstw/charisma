var x$;x$=angular.module("main",[]),x$.controller("main",["$scope","$http"].concat(function(t,n){return plotdb.load("chart/charisma.json",function(n){return t.$apply(function(){return t.chart=n,t.fetch()})}),t.fetch=function(){var e;return e=["https://spreadsheets.google.com/feeds/list/","16fmW_tXYocbRe6oASbemINxF1nJ9ECYRU4gZiHdXF5g","/2/public/values?alt=json"].join(""),n({url:e,method:"GET"}).success(function(n){function e(){var t=[];for(f in s)t.push(f);return t}function r(){return/^gsx\$/.exec(f)}function a(t){var n,e;return(n=/^(\d)\./.exec(s[t].$t))?(e=n[1],l[e]=(l[e]||0)+1):void 0}var c,o,i,u,s,l,f,m;for(c=[],o=0,u=(i=n.feed.entry).length;u>o;++o)s=i[o],l={},e().filter(r).map(a),c.push({gender:s["gsx$我的性別"].$t,name:s["gsx$我的名字"].$t,wisdom:l[1],passion:l[2],instinct:l[3]});return console.log(c.length+" entries fetched"),m={name:[{name:"name",data:c.map(function(t){return t.name})}],category:[{name:"gender",data:c.map(function(t){return t.gender})}],value1:[{name:"wisdom",data:c.map(function(t){return t.wisdom})}],value2:[{name:"passion",data:c.map(function(t){return t.passion})}],value3:[{name:"instinct",data:c.map(function(t){return t.instinct})}]},t.chart.config({}),t.chart.data(m),t.chart.attach(document.getElementById("ternary"))}).error(function(){})},t.root=d3.select("#ternary"),t.setActive=function(){return t.root.selectAll("circle").attr({display:function(n){return t.active&&n.category!==["全部","男","女","其它"][t.active]?"none":"block"}})},t.$watch("active",function(){return t.setActive()}),t.search=function(){return t.root.selectAll("circle").attr({display:function(n){return n.name.indexOf(t.name)>=0?"block":"none"}})},t.clear=function(){return t.setActive()},t.refresh=function(){return t.fetch()}}));